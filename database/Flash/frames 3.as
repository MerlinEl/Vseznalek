  //-------------------------------------------------// //               Swap Position                     ////-------------------------------------------------//fl.outputPanel.clear(); //clear consoledoc.selectNone();//-------------------------------------------------//var doc = fl.getDocumentDOM();var tl = doc.getTimeline();var sel_fr_array = tl.getSelectedFrames();if (doc != null && sel_frames.length > 1) swapPos();//-------------------------------------------------//function swapPos() {	var cur_layer = tl.currentLayer;	var all_frames = tl.layers[cur_layer].frames;	var sel_frames = getTwoSelectedFrames(sel_fr_array);	fl.trace("sel_frames:"+sel_frames.length)	for (var i=0; i<sel_frames.length; i++){				var f = sel_frames[i];		fl.trace("frame start:"+f.start+" frame end:"+f.end)	}};function getTwoSelectedFrames(sel_fr_array){		var p2_array =[];	for(var i=0; i<sel_fr_array.length; i+=3){				var fr_a = sel_fr_array[i+1];		var fr_b = sel_fr_array[i+2];		if (fr_b - fr_a > 1) { //if range is get more frames						p2_array = splitFrames(p2_array, fr_a, fr_b);						} else {						p2_array.push({"start":fr_a, "end":fr_b})		}	return p2_array;}function splitFrames(p2_array, fr_a, fr_b){		for (var i=fr_a; i<fr_b; i++){				p2_array.push({"start":i, "end":i+1})	}	return p2_array;};	//var cur_layer = tl.currentLayer;//var cur_frame = tl.currentFrame;//var cur_elements = tl.layers[cur_layer].frames[cur_frame].elements;//var frame_array = tl.layers[cur_layer].frames;//var sel_frames = tl.getSelectedFrames();//var sel_frames = tl.getSelectedFrames().concat([]);fl.trace("sel framesA:"+tl.getSelectedFrames())if ((sel_frames[0] - 1) >= 0) {   tl.setSelectedFrames([sel_frames[0] - 1, sel_frames[1], sel_frames[1] + 1]);}//move up//fl.trace(sel_frames)//alert(sel_frames[2] - sel_frames[1] | 0);		//var cur_layer = tl.currentLayer;	//var layer = tl.layers[tl.getSelectedLayers()][0];	var cur_layer = tl.currentLayer;	var frame_array = tl.layers[cur_layer].frames;	var frames_count = tl.layers[ cur_layer ].frameCount;	fl.trace("frames array:"+frame_array)	for each (var f in frame_array){				//doc.selection[0].selected = false;		//tl.setSelectedFrames(f, f + 1);		fl.trace("frame:"+f+" elements:"+f.elements+" selected:"+f.selected)	}fl.trace("layer:"+cur_layer+" selected frames:"+sel_frames+" all frames:"+all_frames.length)		if (sel_frames.length != 2){						alert("Select two frames to swap.");			return;		}		var frame_a = sel_frames[0].frames[0];		var frame_b = sel_frames[1].frames[0];		doc.selectNone();		tl.setSelectedFrames(frame_a.startFrame, frame_a.startFrame);		doc.clipCut();		tl.insertBlankKeyframe(all_frames.length);		doc.clipPaste(true);				doc.selectNone();		tl.setSelectedFrames(frame_b.startFrame, frame_b.startFrame);		doc.clipCut();		tl.setSelectedFrames(frame_a.startFrame, frame_a.startFrame);		doc.clipPaste(true);				doc.selectNone();		tl.setSelectedFrames(all_frames.length, all_frames.length);		doc.clipCut();		tl.setSelectedFrames(frame_b.startFrame, frame_b.startFrame);		doc.clipPaste(true);				tl.removeFrames(all_frames.length, all_frames.length);		function getSelectedFrameIndexs(time_line){		var selectFramesArray = time_line.getSelectedFrames();	var sfaLength = selectFramesArray.length/3;	var sliceArr =[];	for(var i=1; i<=sfaLength; i++){		var frame_index = selectFramesArray.slice((i-1)*3, 3*i)		sliceArr.push(frame_index);		//fl.trace(frame_index)	}	return sliceArr};function getSelectedLayerInFrames(time_line, _targetLayerArray){		var targetLayer = time_line.layers[_targetLayerArray[0]]	var startFrameIndex =  _targetLayerArray[1]	var endFrameIndex =  _targetLayerArray[2]	var frameArr = []	for(var i =startFrameIndex;i<endFrameIndex;i++){	var selectedFrame = targetLayer.frames[i]	if(i == selectedFrame.startFrame)frameArr.push(selectedFrame);	}	return {layer:targetLayer,frames:frameArr};};function getSelectedFrames(time_line){		var selectedIndexArr = getSelectedFrameIndexs(time_line);	fl.trace("Selected Indexes:"+selectedIndexArr)	var targertArr = []	for(var i=0;i<selectedIndexArr.length;i++){	targertArr.push(getSelectedLayerInFrames(time_line, selectedIndexArr[i]))	}	return targertArr};