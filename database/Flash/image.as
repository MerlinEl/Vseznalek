private function fitBitmapProportionaly( bmp:Bitmap, max_w, max_h ) : void{					trace("Resizing Proportionaly...")			var ratio = bmp.height/bmp.width;//calculation ratio			if (bmp.width>max_w) { //scale down				bmp.width = max_w;				bmp.height = Math.round(bmp.width*ratio);			}			if (bmp.height>max_h) {//scale down				bmp.height = max_h;				bmp.width = Math.round(bmp.height/ratio);			}			if (bmp.height<max_h && bmp.width<max_w) {//scale up							if (bmp.width > bmp.height){									bmp.width = max_w;					bmp.height = Math.round(bmp.width*ratio);									} else {									bmp.height = max_h;					bmp.width = Math.round(bmp.height/ratio);				}			}		};			var image:Image = new Image();			image.load(new Bitmap(bitmap.bitmapData, PixelSnapping.NEVER, true));						var scale:uint = mc_instance.scaleX; // this is from your example of 600x600 => 100x100			var scaledWidth:uint = bitmap.bitmapData.width * scale;			var scaledHeight:uint = bitmap.bitmapData.height * scale;						image.content.width = scaledWidth;			image.content.height = scaledHeight;						var scaledBitmapData:BitmapData = new BitmapData(scaledWidth, scaledHeight);			scaledBitmapData.draw(image.content); 						image = null;