fn bakeStandardMaterial node mat: sourceChannel:0 targetChannel:1 = if iskindof node Editable_Poly do(	if mat == unsupplied do mat = node.mat	if iskindof mat Standard and iskindof (bmp = try(mat.diffusemap.bitmap) catch()) Bitmap do	(		if (polyop.getmapsupport node targetChannel) and (polyop.getmapsupport node targetChannel) do		(			num = polyop.getnumfaces node			for f=1 to num while not keyboard.escpressed do 			(				vv = polyop.getmapface node targetChannel f				for v in vv do				(					tv = polyop.getmapvert node targetChannel v					cc = getpixels bmp [(mod (tv.x + 1.0) 1.0)*bmp.width, (mod (2.0 - tv.y) 1.0)*bmp.height] 1					polyop.setmapvert node sourceChannel v (cc[1] as point4)				)			)			setCVertMode node on			setShadeCVerts node on			node.vertexColorType = #map_channel			node.vertexColorMapChannel = sourceChannel			update node		)	))  